<!DOCTYPE html>
<html>
  <head>
    <title>Blog | Chris Oliver | St. Louis Ruby on Rails Web Developer</title>

    
    <meta name="author" content="Chris Oliver">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="k8E8tt4Xn45P84zs5M6Z-4cMIGwdbGMJSDSkL6VzvMk" />

    <link rel="alternate" type="application/rss+xml" title="Chris Oliver / excid3.com Feed" href="http://excid3.com/feed.xml"/>

    <!--<link rel="shortcut icon" href="favicon.png">-->
    <link href='/assets/global-c224c07eca6e857790f0324871c8800e.css' rel='stylesheet' type='text/css' />


    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet" />

    <script type="text/javascript" data-cfasync="false">
      (function() {
        var config = {
          kitId: 'voa6eso',
          scriptTimeout: 3000
        };
        var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
      })();
    </script>

    <link href="https://plus.google.com/106699287110566383664/" rel="author" />
  </head>
  <body>
    <div class="fluid-container header">
  <div class="container">
    <nav class="pull-right">
      <!--<a href="http://gorails.com" class="btn btn-gorails btn-gorails-green">Learn Ruby On Rails</a>-->
      <!--<a href="/prototype">Prototype</a>
      <a href="/improve">Improve</a>
      <a>|</a>-->
      <a href="http://gorails.com">Learn Ruby on Rails</a>
      <a>|</a>
      <a href="/blog">Blog</a>
      <a href="/contact" class="btn btn-gorails btn-gorails-red">Hire Me</a>
    </nav>
    <h1 class="name"><a href="/">Chris Oliver</a></h1>
  </div>
</div>


    <section id="blog">
  <div class="container">
    <div class="row">
      <div class="span8 offset2">

        <p class="archive">Looking for old posts? Visit the <a href="/blog/archive">archive</a>.</p>

        
          <article class="first">
            <div class="article-head">
              <h2 class="title"><a href="/blog/change-actionmailer-email-url-host-dynamically" class="js-pjax">Change ActionMailer Email URL Host Dynamically</a></h2>
              <p class="date">Sep 05, 2011</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>Recently I was working on a Rails application that had multiple domains pointing to it. As I was implementing Devise for authentication, I realized that when you configure ActionMailer in your intializer as most tutorials suggest, you won’t be able to change it using the request object.</p>

<p>Say, for example, we want to dynamically set the domain with a Devise confirmation email. ActionMailer doesn’t provide the <code>request</code> object for you to pass into the url method in order to change the domain like you would in a normal view.</p>

<p>Well crap, what do we do??</p>

<p>It’s actually easy. The best suggestion I have for solving this problem is that you create a <code>before_filter</code> that sets it on each request in <code>ApplicationController.rb</code> like so:</p>

<pre><code>  before_filter :set_mailer_host

  def set_mailer_host
    ActionMailer::Base.default_url_options[:host] = request.host_with_port
  end
</code></pre>

<p>And voila! It’s automatically set on each request and your urls in emails should point to the domain they were created on.</p>

<p>One caveat of this is that sending mail from the rails console will default to what you have configured in your initializer. It is still important to set that because those actions will not pass through the ApplicationController beforehand.</p>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="middle">
            <div class="article-head">
              <h2 class="title"><a href="/blog/gary-v-and-paul-carr-on-social-media" class="js-pjax">Gary V and Paul Carr on Social Media</a></h2>
              <p class="date">Aug 29, 2011</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>I think Paul brings up some important points especially around the idea that people changing their avatars to green making it feel like they are making a difference. However, all-in-all I think he’s wrong about it and that Gary’s right in that social media creates a lot of small wins that add up in the bigger picture better than it would without that interaction.</p>

<p>If anything it is certainly an interesting debate!</p>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="last">
            <div class="article-head">
              <h2 class="title"><a href="/blog/using-ominauth-with-rails-and-37-signals-id" class="js-pjax">Using OminAuth with Rails and 37 Signals ID</a></h2>
              <p class="date">Aug 22, 2011</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>If you’ve ever used Omniauth, it’s probably one of the most useful damn gems to come across.</p>

<p>There are lots of examples with your basic Twitter and Facebook auth, but sometimes it is hard to find examples on others. Take 37Signals ID for example. I wanted to integrate this but it wasn’t being helpful at all. I’d get redirected but <code>response_type=code</code> was being set and didn’t seem right. When you click the login link you just get taken to a blank web page.</p>

<p>Thankfully <a href="https://twitter.com/#!/sferik">sferik</a> contributes to like every single ruby project on github explained the reason for this <a href="https://github.com/intridea/omniauth/issues/280">here</a> where a solution was posted to the problem:</p>

<pre><code>config.omniauth :thirty_seven_signals, client_id, client_secret, {:type =&gt; 'web_server'}
</code></pre>

<p>And voila! You’re off to the races. The <code>response_type</code> still gets sent even though it shouldn’t be, however this doesn’t screw up anything.</p>

            </div><!--/.article-content-->
          </article>
          
        

        <div class="blog-navigation">

          <!--<span class="page_number ">Page: 38 of 79</span>-->

          <div class="pull-left">
            
              <a href="/blog/page-39" class="btn btn-gorails btn-gorails-red next">← Older Posts</a>
            
          </div>

          <div class="pull-right">
            
              
                <a href="/blog/page-37" class="btn btn-gorails btn-gorails-red previous">Newer Posts →</a>
              
            
          </div>
        </div>

      </div>
    </div>
  </div>
</section>


    <!--
<div id="footer-nav">
  <ul>
    <li><a class="home" href="http://excid3.com/blog">home</a></li>
    <li><a class="rss" href="http://feeds.feedburner.com/excid3">rss feed</a></li>
    <li><a class="archives" href="http://excid3.com/blog/archives/">archives</a></li>
    <li><a class="email" href="mailto:chris@excid3.com?subject=hello!">say hello</a></li>
    <li><a class="twitter" href="http://twitter.com/excid3">twitter</a></li>
    <li><a class="github" href="http://github.com/excid3">github</a></li>
  </ul>
</div>
-->


<footer class="clearfix">
  <div class="container">
    <p class="pull-left">Do things that scare you.</p>
    <p class="pull-right">Learn about <a href="http://gorails.com/st-louis-ruby-on-rails">St. Louis Ruby on Rails</a></p>
  </div>
</footer>


    <!-- Google Analytics -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8399719-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
