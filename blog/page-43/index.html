<!DOCTYPE html>
<html>
  <head>
    <title>Blog | Chris Oliver | St. Louis Ruby on Rails Web Developer</title>

    
    <meta name="author" content="Chris Oliver">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="k8E8tt4Xn45P84zs5M6Z-4cMIGwdbGMJSDSkL6VzvMk" />

    <link rel="alternate" type="application/rss+xml" title="Chris Oliver / excid3.com Feed" href="http://excid3.com/feed.xml"/>

    <!--<link rel="shortcut icon" href="favicon.png">-->
    <link href='/assets/global-c224c07eca6e857790f0324871c8800e.css' rel='stylesheet' type='text/css' />


    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet" />

    <script type="text/javascript" data-cfasync="false">
      (function() {
        var config = {
          kitId: 'voa6eso',
          scriptTimeout: 3000
        };
        var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
      })();
    </script>

    <link href="https://plus.google.com/106699287110566383664/" rel="author" />
  </head>
  <body>
    <div class="fluid-container header">
  <div class="container">
    <nav class="pull-right">
      <!--<a href="http://gorails.com" class="btn btn-gorails btn-gorails-green">Learn Ruby On Rails</a>-->
      <!--<a href="/prototype">Prototype</a>
      <a href="/improve">Improve</a>
      <a>|</a>-->
      <a href="http://gorails.com">Learn Ruby on Rails</a>
      <a>|</a>
      <a href="/blog">Blog</a>
      <a href="/contact" class="btn btn-gorails btn-gorails-red">Hire Me</a>
    </nav>
    <h1 class="name"><a href="/">Chris Oliver</a></h1>
  </div>
</div>


    <section id="blog">
  <div class="container">
    <div class="row">
      <div class="span8 offset2">

        <p class="archive">Looking for old posts? Visit the <a href="/blog/archive">archive</a>.</p>

        
          <article class="first">
            <div class="article-head">
              <h2 class="title"><a href="/blog/sharing-a-devise-user-session-across-subdomains-with-rails-3" class="js-pjax">Sharing A Devise User Session Across Subdomains With Rails 3</a></h2>
              <p class="date">May 30, 2011</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>Recently I’ve been working on a Rails application that supports subdomains. I’m using Devise for user authentication and need the user to choose a subdomain to use upon registration.</p>

<p>Similar to the 37signals applications, I want a single sign-on to be persistent across subdomains. Since I didn’t have a clue where to begin with subdomains, I followed <a href="https://github.com/fortuity/rails3-subdomain-devise/wiki/Tutorial-(Walkthrough)">this tutorial</a> on my new Rails 3.1 beta 1 application. This tutorial worked like a charm and I omitted the friendly_id and tweaked a few things to my liking.</p>

<p>The gist of it is simple. Create a User model like you would normally do with Devise. You add a Subdomain model that is linked to the Users (in my case I only wanted a single subdomain per user). Configuring the routes is pretty simple as you can simply create a constraint that will match the root and fire it off to the right action and let the rest fall through.</p>

<p>The trick comes into sharing the session between domains. Browsers, of course, will separate out the cookies and store them by separated out by subdomain. What you want to do is edit your config/initializers/session_store.rb file to look like this</p>

<pre><code>APPNAMEGOESHERE::Application.config.session_store :cookie_store, :key =&gt; '_tourlyapp_session', :domain =&gt; "lvh.me"
</code></pre>

<p>The trick here is the <code>:domain</code> option. What this does is sets the level of the TLD (top level domain) and tells Rails how long the domain is. The part you want to watch out for here is that if you set <code>:domain =&gt; :all</code> like is recommend in some places, it simply won’t work unless you’re using localhost. <code>:all</code> defaults to a TLD length of 1, which means if you’re testing with Pow (myapp.dev) it won’t work either because that is a TLD of length 2.</p>

<p>You might get weird things like halfway Devise sessions sharing, but only allowing you to create and destroy the session on the root domain. Using <code>:all</code> works great if you’re using localhost, but when I started using lvh.me:3000 for testing I had those problems (lvh.me stands for local vhost me and is a domain that simply points to localhost which makes for zero-config subdomain development. It’s super handy.).</p>

<p>The best option might be to comment out this line and put it into your individual environment configurations. This way you can keep things configured easily as the <code>:all</code> option. Once you’ve got your domain string added everything should work like a charm.</p>

<p><strong>BONUS PROTIP: </strong>The normal route variables you see used end with _path. These don’t include the domain and therefore ignore the :subdomain option you pass into them. <code>url_for</code>, on the other hand, does support subdomains so you should get into the habit of using root_url instead of root_path and so on.</p>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="middle">
            <div class="article-head">
              <h2 class="title"><a href="/blog/grabbing-favicons-like-a-pro" class="js-pjax">Grabbing Favicons Like A Pro</a></h2>
              <p class="date">May 23, 2011</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>As I was deploying a Rails application today I realized I had forgotten the Favicon! Now now, before you start proclaiming that I’m a horrible developer and plastering my photo on a WANTED poster, let’s go through an awesome way to grab a Favicon from a domain.</p>

<p>The site is hosted on SIUe’s domain and I wanted to use the same favicon as they do. Well, it wasn’t easily grabbable from source or by just probing the domain for the filename. Go figure.</p>

<p>So how do we grab the favicon? Thanks to Google being awesome, it’s not hard. I just opened up a terminal and navigated to my Rails application’s public directory and ran this:</p>

<pre><code>curl http://www.google.com/s2/u/0/favicons?domain=siue.edu &gt; favicon.ico
</code></pre>

<p>Bam! You’re done. You should now have a copy of the favicon from any domain you want save to a file on your hdd. Replace siue.edu at the end of the url with the domain you need and you’re good to go!</p>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="last">
            <div class="article-head">
              <h2 class="title"><a href="/blog/getting-good" class="js-pjax">Getting Good</a></h2>
              <p class="date">May 16, 2011</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>I was reading <a href="http://lifehacker.com/5798910/its-normal-to-take-awhile-before-your-work-is-as-good-as-your-ambitions">this article on Lifehacker</a> the other day and realized how true it was.</p>

<p>This is how I’ve often felt about programming until recently. I’ve been a programmer since the 7th grade. Throughout the rest of grade school, highschool, and college (somewhere around 10 years) I have continuously been writing software. Most of the time it was self taught and working on little things I thought would be fun to make. <strong>10 years later and only now do I feel confident about my skills as a programmer.</strong></p>

<p>Maybe I’m just a slower learner, but every programming course, every programming book I read made little difference in my work produced. I start to know about better practices and tried to incorporate them if it was obviously a good fit. <strong>When it comes down to it though, working is the only thing that made me better.</strong> A lot of my classmates only write code for school. One asked me how I could possibly have built my own website. I just looked at him and shrugged. It’s what I enjoy so I do a lot of it and if I love it, there’s no reason I shouldn’t do this as my day job.</p>

<p>I’m sure you’ve heard the saying that it takes 10,000 hours to become an expert. <a href="http://entertainment.timesonline.co.uk/tol/arts_and_entertainment/books/article4969415.ece">#</a> Well it’s true. You’ve got to work, solve problems on your own, and keep challenging yourself to get good. <strong>It’s not glorious.</strong> I’ve spent countless hours alone with my laptop hacking on code. Do I regret not spending my time with other people? Some times I do, but in the end, this is what I enjoy and now that I feel confident of my skills and have finished college, I can do what I want. I have more experience than my classmates because I worked hard. This gives me freedom in many areas that they don’t have.</p>

<p><strong>Work hard. It makes a difference.</strong> Don’t do things you don’t like, and certainly don’t give up things that you’ll regret. Plus, if you’re anything like me, you’ve got dreams of changing the world. Quit dreaming and make it a reality. In fact, close your browser and go do some damn work.</p>

            </div><!--/.article-content-->
          </article>
          
        

        <div class="blog-navigation">

          <!--<span class="page_number ">Page: 43 of 79</span>-->

          <div class="pull-left">
            
              <a href="/blog/page-44" class="btn btn-gorails btn-gorails-red next">← Older Posts</a>
            
          </div>

          <div class="pull-right">
            
              
                <a href="/blog/page-42" class="btn btn-gorails btn-gorails-red previous">Newer Posts →</a>
              
            
          </div>
        </div>

      </div>
    </div>
  </div>
</section>


    <!--
<div id="footer-nav">
  <ul>
    <li><a class="home" href="http://excid3.com/blog">home</a></li>
    <li><a class="rss" href="http://feeds.feedburner.com/excid3">rss feed</a></li>
    <li><a class="archives" href="http://excid3.com/blog/archives/">archives</a></li>
    <li><a class="email" href="mailto:chris@excid3.com?subject=hello!">say hello</a></li>
    <li><a class="twitter" href="http://twitter.com/excid3">twitter</a></li>
    <li><a class="github" href="http://github.com/excid3">github</a></li>
  </ul>
</div>
-->


<footer class="clearfix">
  <div class="container">
    <p class="pull-left">Do things that scare you.</p>
    <p class="pull-right">Learn about <a href="http://gorails.com/st-louis-ruby-on-rails">St. Louis Ruby on Rails</a></p>
  </div>
</footer>


    <!-- Google Analytics -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8399719-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
