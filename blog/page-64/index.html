<!DOCTYPE html>
<html>
  <head>
    <title>Blog | Chris Oliver | St. Louis Ruby on Rails Web Developer</title>

    
    <meta name="author" content="Chris Oliver">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="k8E8tt4Xn45P84zs5M6Z-4cMIGwdbGMJSDSkL6VzvMk" />

    <link rel="alternate" type="application/rss+xml" title="Chris Oliver / excid3.com Feed" href="http://excid3.com/feed.xml"/>

    <!--<link rel="shortcut icon" href="favicon.png">-->
    <link href='/assets/global-c224c07eca6e857790f0324871c8800e.css' rel='stylesheet' type='text/css' />


    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet" />

    <script type="text/javascript" data-cfasync="false">
      (function() {
        var config = {
          kitId: 'voa6eso',
          scriptTimeout: 3000
        };
        var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
      })();
    </script>

    <link href="https://plus.google.com/106699287110566383664/" rel="author" />
  </head>
  <body>
    <div class="fluid-container header">
  <div class="container">
    <nav class="pull-right">
      <!--<a href="http://gorails.com" class="btn btn-gorails btn-gorails-green">Learn Ruby On Rails</a>-->
      <!--<a href="/prototype">Prototype</a>
      <a href="/improve">Improve</a>
      <a>|</a>-->
      <a href="http://gorails.com">Learn Ruby on Rails</a>
      <a>|</a>
      <a href="/blog">Blog</a>
      <a href="/contact" class="btn btn-gorails btn-gorails-red">Hire Me</a>
    </nav>
    <h1 class="name"><a href="/">Chris Oliver</a></h1>
  </div>
</div>


    <section id="blog">
  <div class="container">
    <div class="row">
      <div class="span8 offset2">

        <p class="archive">Looking for old posts? Visit the <a href="/blog/archive">archive</a>.</p>

        
          <article class="first">
            <div class="article-head">
              <h2 class="title"><a href="/blog/changing-the-ubuntu-10-04-audio-channel-control" class="js-pjax">Changing the Ubuntu 10.04 Audio Channel Control</a></h2>
              <p class="date">Jun 10, 2010</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>This has been driving me nuts for the longest time and I just haven’t had time to look up the fix until now. Luckily the [Ubuntu Forums][1] has an unbelievably great community and got me an answer within a few hours. My problem was that the volume control for the new PulseAudio system in Ubuntu 10.04 would have either an On or Off volume and absolutely nothing in between. You could go from Off to completely On and none of the other notches would change a thing. Fiddling with alsamixer, I could tell that it was modifying the Master Front channel, but this wasn’t what was needed for my HDA audio card on my Asus M4N78 motherboard. I needed it to use the PCM channel.</p>

<p>lidex on the forums pointed me to [this post][2] where the details were all layed out for me:
<code>This is being currently discussed in bug 410948.
To sum up, here's what you do:
Code:
sudo nano /etc/pulse/default.pa
Uncomment the line : #load-module module-alsa-sink
And add: control=PCM
So it reads: load-module module-alsa-sink control=PCM
Further down where it reads: load-module module-udev-detect
Add: ignore-dB=1
So it reads: load-module module-udev-detect ignore_dB=1
And save. You may need to restart for changes to take effect.
The volume control will now only adjust the PCM channel, so you may want to turn the Master and LFE to maximum in alsamixer.</code></p>

<p>And if you're getting that crackling sound:
Code:
sudo nano /etc/modprobe.d/alsa-base.conf
Comment out the last line which reads: options snd-hda-intel power_save=10 power_save_controller=N</p>

<p>After applying that fix, restarting and checking with the volume controls, I was pleased to see it was controlling the PCM channel finally!! Talk about an annoying issue. You never knew if you were going to blow your eardrums out plugging in headphones or turning on the speakers. All is good! I love the linux community.</p>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="middle">
            <div class="article-head">
              <h2 class="title"><a href="/blog/installing-ruby-on-rails-on-ubuntu-10-04" class="js-pjax">Installing Ruby on Rails on Ubuntu 10.04</a></h2>
              <p class="date">Jun 09, 2010</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>It’s quite simple. Run these commands in terminal and you are set. The first command is for installing Ruby on Rails while the last ones are for installing the MySQL gem in order to use MySQL. This assumes you have MySQL as Benson pointed out.</p>

<p><code>sudo apt-get install build-essential rails</code></p>

<p>sudo apt-get install rubygems ruby-dev libmysql-ruby libmysqlclient-dev
sudo gem install mysql</p>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="last">
            <div class="article-head">
              <h2 class="title"><a href="/blog/simple-python-plugin-system" class="js-pjax">Simple Python Plugin System</a></h2>
              <p class="date">Jun 06, 2010</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>Working on the upcoming version of Keryx, we’ve gained some interest in making Keryx support many different Linux distributions. This means we will have to support other package management systems, more than simply APT. A sort of plugin system is needed for this and it would need to be easy to use. Our frontends to this library will need to determine what features are available so the interface can be modified accordingly. So how do you approach this without making it terribly complicated?</p>

<p>Well first off we want to make sure the plugins load from a specific folder. I decided to make plugins be either single files or full directories. If the option to use a full directory is used, the <strong>init</strong>.py file must contain the plugin description info and primary class. In order to keep this easily maintainable, the plugin manager is simply a class that contains a dictionary of the plugins. Numerous instances of the plugins can be created as well as separate plugin systems (for example, maybe you were wanting to do a backend plugin system and a separate frontend plugin system). Creating multiple instances of a plugin is also important. We do this by keeping the module stored in the manager instead of an instance. This way the manager is simply a way to find and create instances of plugins.</p>

<p>Here’s a prototype of what I have described here, reasonably well commented. I called them “definitions” instead of “plugins” in case you were wondering:</p>

<pre><code>import logging
import os
import sys


class DefinitionManager:
    """Definition Manager

    Loads the definitions from a folder and manages them
    """


    definitions = {}


    def __init__(self, folder):
        """Load all available definitions stored in folder"""

        #TODO: User path and variable expansions
        folder = os.path.abspath(folder)

        if not os.path.isdir(folder):
            logging.error("Unable to load plugins because '%s' is not a folder" % folder)
            return

        # Append the folder because we need straight access
        sys.path.append(folder)

        # Build list of folders in directory
        to_import = [f for f in os.listdir(folder) if not f.endswith(".pyc")]

        # Do the actual importing
        for module in to_import:
            self.__initialize_def(module)


    def __initialize_def(self, module):
        """Attempt to load the definition"""

        # Import works the same for py files and package modules so strip!
        if module.endswith(".py"):
            name = module [:-3]
        else:
            name = module

        # Do the actual import
        __import__(name)
        definition = sys.modules[name]

        # Add the definition only if the class is available
        if hasattr(definition, definition.info["class"]):
            self.definitions[definition.info["name"]] = definition
            logging.info("Loaded %s" % name)


    def new_instance(self, name, *args, **kwargs):
        """Creates a new instance of a definition
        name - name of the definition to create

        any other parameters passed will be sent to the __init__ function
        of the definition, including those passed by keyword
        """
        definition = self.definitions[name]
        return getattr(definition, definition.info["class"])(*args, **kwargs)
</code></pre>

<p>I’ve used this approach for backend plugins on Unwrapt, a platform independent package management system emulator. To see my up-to-date implementation head  over at http://github.com/excid3/unwrapt in DefinitionManager.py.</p>

<p>Leave a comment if you have any questions or suggestions.</p>

            </div><!--/.article-content-->
          </article>
          
        

        <div class="blog-navigation">

          <!--<span class="page_number ">Page: 64 of 79</span>-->

          <div class="pull-left">
            
              <a href="/blog/page-65" class="btn btn-gorails btn-gorails-red next">← Older Posts</a>
            
          </div>

          <div class="pull-right">
            
              
                <a href="/blog/page-63" class="btn btn-gorails btn-gorails-red previous">Newer Posts →</a>
              
            
          </div>
        </div>

      </div>
    </div>
  </div>
</section>


    <!--
<div id="footer-nav">
  <ul>
    <li><a class="home" href="http://excid3.com/blog">home</a></li>
    <li><a class="rss" href="http://feeds.feedburner.com/excid3">rss feed</a></li>
    <li><a class="archives" href="http://excid3.com/blog/archives/">archives</a></li>
    <li><a class="email" href="mailto:chris@excid3.com?subject=hello!">say hello</a></li>
    <li><a class="twitter" href="http://twitter.com/excid3">twitter</a></li>
    <li><a class="github" href="http://github.com/excid3">github</a></li>
  </ul>
</div>
-->


<footer class="clearfix">
  <div class="container">
    <p class="pull-left">Do things that scare you.</p>
    <p class="pull-right">Learn about <a href="http://gorails.com/st-louis-ruby-on-rails">St. Louis Ruby on Rails</a></p>
  </div>
</footer>


    <!-- Google Analytics -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8399719-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
