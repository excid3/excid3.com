<!DOCTYPE html>
<html>
  <head>
    <title>Blog | Chris Oliver | St. Louis Ruby on Rails Web Developer</title>

    
    <meta name="author" content="Chris Oliver">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="k8E8tt4Xn45P84zs5M6Z-4cMIGwdbGMJSDSkL6VzvMk" />

    <link rel="alternate" type="application/rss+xml" title="Chris Oliver / excid3.com Feed" href="http://excid3.com/feed.xml"/>

    <!--<link rel="shortcut icon" href="favicon.png">-->
    <link href='/assets/global-c224c07eca6e857790f0324871c8800e.css' rel='stylesheet' type='text/css' />


    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet" />

    <script type="text/javascript" data-cfasync="false">
      (function() {
        var config = {
          kitId: 'voa6eso',
          scriptTimeout: 3000
        };
        var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
      })();
    </script>

    <link href="https://plus.google.com/106699287110566383664/" rel="author" />
  </head>
  <body>
    <div class="fluid-container header">
  <div class="container">
    <nav class="pull-right">
      <!--<a href="http://gorails.com" class="btn btn-gorails btn-gorails-green">Learn Ruby On Rails</a>-->
      <!--<a href="/prototype">Prototype</a>
      <a href="/improve">Improve</a>
      <a>|</a>-->
      <a href="http://gorails.com">Learn Ruby on Rails</a>
      <a>|</a>
      <a href="/blog">Blog</a>
      <a href="/contact" class="btn btn-gorails btn-gorails-red">Hire Me</a>
    </nav>
    <h1 class="name"><a href="/">Chris Oliver</a></h1>
  </div>
</div>


    <section id="blog">
  <div class="container">
    <div class="row">
      <div class="span8 offset2">

        <p class="archive">Looking for old posts? Visit the <a href="/blog/archive">archive</a>.</p>

        
          <article class="first">
            <div class="article-head">
              <h2 class="title"><a href="/blog/setting-up-ubuntu-12-04-with-ruby-1-9-3-nginx-passenger-and-postgresql-or-mysql" class="js-pjax">Setting Up Ubuntu 12.04 with Ruby 1.9.3, Rails, Nginx, Passenger, and PostgreSQL or MySQL
</a></h2>
              <p class="date">May 07, 2012</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>With the recent release of Ubuntu 12.04, we’ve got an even easier way to setup our webserver. Let me walk you through the steps:</p>

<h2>Create Our Deploy User</h2>

<p>One of the first things we want to make sure we get done is that we have a deploy user. This going to be the user that deploys the website and the same user that the website is run as.</p>

<pre><code>sudo adduser deploy
</code></pre>

<h2>Update and install our dependencies</h2>

<p>This downloads the latest list of available software versions. We’ll install our build dependencies for later.</p>

<pre><code>sudo apt-get -y update
sudo apt-get -y install build-essential zlib1g-dev libssl-dev libreadline-dev libyaml-dev libcurl4-openssl-dev curl git-core python-software-properties
</code></pre>

<h2>Install Ruby 1.9.3</h2>

<p>We’re going to install Ruby 1.9.3 from source. Note that -p385 may not be the latest version of Ruby. Check out ruby-lang.org to get the latest version and replace it in the following commands:</p>

<pre><code>wget http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p385.tar.gz
tar -xvzf ruby-1.9.3-p385.tar.gz
cd ruby-1.9.3-p385/
./configure
make
sudo make install
echo "gem: --no-ri --no-rdoc" &gt;&gt; ~/.gemrc
sudo gem install bundler
</code></pre>

<h2>Install Nginx with Passenger</h2>

<p>Since we’ll be using Nginx for serving our application, we’re going to install it using the Passenger installer. Nginx modules need to be compiled into nginx, unlike Apache, so we can’t just install the package from the PPA.</p>

<pre><code>sudo gem install passenger
sudo passenger-install-nginx-module
# Choose "download, compile, and install Nginx for me"
# Accept defaults for any other questions it asks you
</code></pre>

<p>Next we want to setup a script to allow us to control Nginx. We’re going to grab this from Linode:</p>

<pre><code>wget -O init-deb.sh http://library.linode.com/assets/660-init-deb.sh
sudo mv init-deb.sh /etc/init.d/nginx
sudo chmod  x /etc/init.d/nginx
sudo /usr/sbin/update-rc.d -f nginx defaults
</code></pre>

<p>You can now control Nginx with this script. To start and stop the server manually, you run:</p>

<pre><code>sudo /etc/init.d/nginx stop
sudo /etc/init.d/nginx start
</code></pre>

<p>We can verify nginx is running by opening up Firefox and going to</p>

<p>![][1]</p>

<p>After installation, you’ll get some tips on how to configure an Nginx server to listen on a domain and enable passenger for it. You’ll want to save this for later when you setup your deployment scripts. The root path there will be the public directory where you setup your Rails app folder.</p>

<p>One of the first things you want to do is edit the <code>nginx.conf</code> so that you can tell it to run as the deploy user. This file will be <code>/opt/nginx/conf/nginx.conf</code> and you can add this as the first line:</p>

<pre><code>user deploy staff;
</code></pre>

<h4>Alternative: Nginx With Unicorn</h4>

<p>An alternative to Passenger is to install Nginx from it’s PPA and use Unicorn instead. This is preferred, but it takes a bit more setup. I won’t get too much into this, but you can install just plain Nginx with the following commands:</p>

<pre><code>sudo add-apt-repository ppa:nginx/stable
sudo apt-get update
sudo apt-get install nginx
sudo service nginx start
</code></pre>

<p>After this, I recommend checking out [Deploying To A VPS][2] by Ryan Bates for setting up Unicorn.</p>

<h2>Setup your database</h2>

<p>Our next step is installing our database server. I’d recommend using PostgreSQL but many of you may prefer MySQL. Take your pick:</p>

<h4>MySQL</h4>

<pre><code>sudo apt-get install mysql-server mysql-client libmysqlclient-dev
</code></pre>

<p>OR</p>

<h4>PostgreSQL 9.1.3</h4>

<pre><code>sudo apt-get -y install postgresql libpq-dev
</code></pre>

<h2>Node.js for the Rails asset pipeline</h2>

<p>One of the other things you’ll want is Node.js. This will help us do the compiling of assets on deployments. It’s a pretty quick installation to get the latest version:</p>

<pre><code>sudo apt-add-repository ppa:chris-lea/node.js
sudo apt-get -y update
sudo apt-get -y install nodejs
</code></pre>

<h2>Configure Your Rails App</h2>

<p>You’ll need to get a copy of your rails application on the webserver. The best place to do this is to store it in the home directory of the deploy user. I recommend using Capistrano to set this up. Afterwards, you can modify your <code>/opt/nginx/conf/nginx.conf</code> file to contain a new passenger server like so:</p>

<pre><code>server {
    listen 80;
    server_name example.com;
    root /home/deploy/myapplication/public;   # 
</code></pre>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="middle">
            <div class="article-head">
              <h2 class="title"><a href="/blog/dont-settle" class="js-pjax">Don&#8217;t Settle</a></h2>
              <p class="date">Apr 18, 2012</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <blockquote><p>“You’ve got to find what you love. And that is as true for your work as it is for your lovers. Your work is going to fill a large part of your life, and the only way to be truly satisfied is to do what you believe is great work. And the only way to do great work is to love what you do. If you haven’t found it yet, keep looking. Don’t settle. As with all matters of the heart, you’ll know when you find it. And, like any great relationship, it just gets better and better as the years roll on. So keep looking until you find it. Don’t settle.”</p>

<p><strong>Steve Jobs</strong></p></blockquote>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="last">
            <div class="article-head">
              <h2 class="title"><a href="/blog/flip-a-coin" class="js-pjax">Flip A Coin</a></h2>
              <p class="date">Apr 16, 2012</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <blockquote><p>“When you have to make a hard decision, flip a coin.
When that coin is in the air, you suddenly know what you’re hoping for.”</p></blockquote>

<p>This quote has hit home on several occasions. There have been a few times in life where I was pretty sure I didn’t want to continue. The problem was that it was easier to continue than to sit down and make the realization I needed a change.</p>

<p>For most decisions, you probably lean to one side whether you want to admit it or not. Have someone else ask you the decision and flip the coin. The answer now feels out of your control. Allow yourself a second to think before they show you the result. It quickly becomes clear that you want a specific result.</p>

<h2>Decisions can be very hard. Especially when you can’t make up your mind.</h2>

<p>Robbie Abed recently <a href="http://robbieabed.com/fire-me-i-beg-you/">discussed a situation</a> he was in previously at a job he didn’t like. This same situation happened to me several months ago. I didn’t want to come into work anymore and secretly wished I had a reason to leave. About a month after realizing this, I left as well.</p>

<p>In one of his many amazing blog posts, Derek Sivers <a href="http://sivers.org/hellyeah">talks about decision making</a> by either saying HELL YEAH or no. Now this works wonderfully if you’re not making a decision about starting something new. It’s easy to dismiss this tactic when you’re miserable. When you’re doing something soul sucking, you sometimes can’t bring yourself to say “hell yeah!” anymore. Flipping a coin can help you realize what you want to say “hell yeah!” to.</p>

<h2>The truth is you’re always better off</h2>

<p>When it comes to making a decision about pursuing a new path or staying, it’s always best to go with your gut feeling.</p>

<p>Do you immediately lean towards staying? Then you need to bring it up to your boss and coworkers about changes that need to be made. Truth is, you’re happy where you’re at, mostly. Some things aren’t working, so bring it up and get them fixed.</p>

<p>If you lean the other direction, then quit. You’ve always wanted to build things? Then go. In the world we live in today, you’ve got nothing stopping you. You can travel around the world in a matter of hours. A team of 13 <a href="http://blog.instagram.com/post/20785013897/instagram-facebook">can sell their company</a> for $1 billion after just 2 years.</p>

<p>There is NO REASON you shouldn’t be doing what makes you excited day in and day out.</p>

            </div><!--/.article-content-->
          </article>
          
        

        <div class="blog-navigation">

          <!--<span class="page_number ">Page: 20 of 79</span>-->

          <div class="pull-left">
            
              <a href="/blog/page-21" class="btn btn-gorails btn-gorails-red next">← Older Posts</a>
            
          </div>

          <div class="pull-right">
            
              
                <a href="/blog/page-19" class="btn btn-gorails btn-gorails-red previous">Newer Posts →</a>
              
            
          </div>
        </div>

      </div>
    </div>
  </div>
</section>


    <!--
<div id="footer-nav">
  <ul>
    <li><a class="home" href="http://excid3.com/blog">home</a></li>
    <li><a class="rss" href="http://feeds.feedburner.com/excid3">rss feed</a></li>
    <li><a class="archives" href="http://excid3.com/blog/archives/">archives</a></li>
    <li><a class="email" href="mailto:chris@excid3.com?subject=hello!">say hello</a></li>
    <li><a class="twitter" href="http://twitter.com/excid3">twitter</a></li>
    <li><a class="github" href="http://github.com/excid3">github</a></li>
  </ul>
</div>
-->


<footer class="clearfix">
  <div class="container">
    <p class="pull-left">Do things that scare you.</p>
    <p class="pull-right">Learn about <a href="http://gorails.com/st-louis-ruby-on-rails">St. Louis Ruby on Rails</a></p>
  </div>
</footer>


    <!-- Google Analytics -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8399719-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
