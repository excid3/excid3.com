<!DOCTYPE html>
<html>
  <head>
    <title>Blog | Chris Oliver | St. Louis Ruby on Rails Web Developer</title>

    
    <meta name="author" content="Chris Oliver">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="k8E8tt4Xn45P84zs5M6Z-4cMIGwdbGMJSDSkL6VzvMk" />

    <link rel="alternate" type="application/rss+xml" title="Chris Oliver / excid3.com Feed" href="http://excid3.com/feed.xml"/>

    <!--<link rel="shortcut icon" href="favicon.png">-->
    <link href='/assets/global-c224c07eca6e857790f0324871c8800e.css' rel='stylesheet' type='text/css' />


    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet" />

    <script type="text/javascript" data-cfasync="false">
      (function() {
        var config = {
          kitId: 'voa6eso',
          scriptTimeout: 3000
        };
        var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
      })();
    </script>

    <link href="https://plus.google.com/106699287110566383664/" rel="author" />
  </head>
  <body>
    <div class="fluid-container header">
  <div class="container">
    <nav class="pull-right">
      <!--<a href="http://gorails.com" class="btn btn-gorails btn-gorails-green">Learn Ruby On Rails</a>-->
      <!--<a href="/prototype">Prototype</a>
      <a href="/improve">Improve</a>
      <a>|</a>-->
      <a href="http://gorails.com">Learn Ruby on Rails</a>
      <a>|</a>
      <a href="/blog">Blog</a>
      <a href="/contact" class="btn btn-gorails btn-gorails-red">Hire Me</a>
    </nav>
    <h1 class="name"><a href="/">Chris Oliver</a></h1>
  </div>
</div>


    <section id="blog">
  <div class="container">
    <div class="row">
      <div class="span8 offset2">

        <p class="archive">Looking for old posts? Visit the <a href="/blog/archive">archive</a>.</p>

        
          <article class="first">
            <div class="article-head">
              <h2 class="title"><a href="/blog/offline-package-installation-full-circle-magazine" class="js-pjax">Offline Package Installation &#8211; Full Circle Magazine</a></h2>
              <p class="date">Jan 01, 2010</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>About a month back, I wrote an article for Full Circle Magazine, the wonderful independent Ubuntu magazine. My goal has been educating and helping people without internet to be able to install and update packages on their offline Linux installations. The article I wrote covered 4 different ways you can gather and install packages for these offline machines ranging from  to my own project <a href="http://keryxproject.org">Keryx</a>. Covering both the upsides and downsides to each, hopefully it will help to educate users on the tool that is right for them. Enough introduction, have a look for yourself: . Pages 14-16.</p>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="middle">
            <div class="article-head">
              <h2 class="title"><a href="/blog/simpyl-pastebin-a-minimal-python-pastebin" class="js-pjax">Simpyl Pastebin &#8211; A minimal Python Pastebin</a></h2>
              <p class="date">Dec 29, 2009</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>Tonight I needed to relax a bit and figured what better way than to take a straight caffeine injection, fire up the old ‘puter, and hammer out an <a href="http://github.com/excid3/simpyl_pastebin">extremely simple pastebin </a>using Python and Django. I wanted this project to be an example for others to get the basic idea of a pastebin, Python, and Django as well. So why wait, let’s jump right in.</p>

<p>First of all, with Django, we have the basic project. The project is the top level directory files: manage.py (controls the Django application), urls.py (contains the url configurations), settings.py (contains the application settings), and <strong>init</strong>.py (which just kind of sits there and looks pretty so that importing works).</p>

<p>First, a quick rundown of the configuration. We are using sqlite3 currently. This is a relation database that is stored in a file meaning that you will not need an sql database server running. All the data will be stored in the database file (by default is simpyl.dat) meaning that you can actually copy the directory and everything will move with it as opposed to having it on a remote sql database server.</p>

<p>In urls.py we have the following code:</p>

<pre><code>    (r'^$', 'simpyl_pastebin.pastebin.views.main'),
    (r'', 'simpyl_pastebin.pastebin.views.fetch_paste'),
</code></pre>

<p>This is fairly self explanatory. Basically the regex’d url on the left will be sent to the module function that is on the right. First we have the root domain pointing to the pastebin/views.py main() function. The next line takes absolutely any url that wasn’t already done and uses the fetch_paste function.</p>

<p>Before we get to the view functions that handle the actual pages, let’s take a look at our database table. This is located in pastebin/models.py, but I’ll paste the code here as well:</p>

<pre><code>from django.db import models

class Paste(models.Model):
    content = models.CharField(max_length=1000000)
    url = models.CharField(max_length=32)
</code></pre>

<p>This declares the “paste” table in our database. Object-Relational Mapping is used to map a table to objects of a class. Our Paste class is the object that is created and retrieved for each paste and retrieval. It has two properties, the actual paste content, and the url. The url is a simple md5 hash of the content to make for easy url generation. What we will do in the fetch_paste function is to take the url someone is trying to visit, see if it matches a url from the paste table and if it does we display that paste’s content. If it doesn’t we send them back to the homepage.</p>

<p>Now that we have the basic understand of the structure of the site, we need to actually implement it and get the logic working. First let us take a look at the logic behind the site home in the main() function:</p>

<pre><code>def main(request):
    previous = request.POST.get('paste', '')

    if previous:
        id = hashlib.md5(previous).hexdigest()

        try:
            Paste.objects.get(url=id)
        except:
            p = Paste(content=previous, url=id)
            p.save()

        previous = 'http://%s/%s' % (request.get_host(), id)

    t = loader.get_template('pastebin/templates/index.html')
    c = Context({
        'previous': previous
    })

    return http.HttpResponse(t.render(c))
</code></pre>

<p>If you look through the index.html page that is rendered, we see that the textarea has a name of “paste”. So in the first line of this function, if we find that the page was submitted and there was something in the textarea we want to retrieve it, or if not, populate the variable with an empty string. Next we compute the md5 and check if there was anything or not. If there was, we want to check the database for an existing paste that is the exact url as this one. If there is we don’t bother creating anything new, just give them the link from the earlier created one. If we don’t find anything, we create a new Paste object (an entry in the table) and save it to the database. Afterwards we setup the variables and the template to render for the page to be displayed and return it.</p>

<p>Now for the retrieval of a paste, it’s even simpler:</p>

<pre><code>def fetch_paste(request):
    url = request.META.get('PATH_INFO', '')[1:]
    content = ""

    try:
        p = Paste.objects.get(url=url)
    except:
        t = loader.get_template('pastebin/templates/index.html')
        c = Context({
            'error': "Paste '%s' does not exist." % url
        })
        return http.HttpResponse(t.render(c))

    return http.HttpResponse(p.content)
</code></pre>

<p>In fetch_paste, we grab the url from the request. Then we attempt to find a paste that matches that url. If we do find one, we simply render the content of the paste, if not we render the homepage and display the error.</p>

<p>Nothing much to it. Fairly straight forward. Reading through the Django documentation and tutorial will make this clearer where I kind of skimmed over (which was probably in most areas). More of getting the logic and flow down than the syntax was my goal. Hopefully this helps!</p>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="last">
            <div class="article-head">
              <h2 class="title"><a href="/blog/pyinstaller-followup-building-python-executables-on-windows" class="js-pjax">PyInstaller Followup &#8211; Building Python Executables on Windows</a></h2>
              <p class="date">Dec 29, 2009</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>In my previous post <a href="http://excid3.com/blog/2009/12/pyinstaller-a-simple-tutorial/">PyInstaller – A Simple Tutorial</a>, I walked through the basics of creating a single file executable of <a href="http://keryxproject.org">Keryx</a> using Ubuntu and PyInstaller. This was a very smooth and straightforward approach to taking a python application and building it into a single file executable on Linux. Because Keryx is intended for use on many systems, which may or may not have Python and wxPython installed, it is idea of having a single file executable is definitely ideal. We’ve already built a single file executable for linux that includes both Python and wxPython in the previous post, but now we need to do the same thing on Windows. The steps are similar but I’m going to outline it all here for you.</p>

<p><strong>Step One</strong> Getting PyInstaller</p>

<p>Just like we did before, download the latest version of PyInstaller. For this I went with the pre-release of 1.4 nightly snapshot. Download this, extract it and fire up your Windows command line. You can do this by going to Start->Run and typing “cmd”. I will be using Windows 7 for this. First we need to move into the pyinstaller directory like so:</p>

<pre><code>Microsoft Windows [Version 6.1.7600]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\Chris Oliver&gt;cd Desktop\pyinstaller-1.4
C:\Users\Chris Oliver\Desktop\pyinstaller-1.4&gt;
</code></pre>

<p>Because we are using Windows, all of Python is contained inside the python dlls. This means we don’t need to compile anything for pyinstaller on Windows like we had to on Ubuntu. We can simply jump straight to running the Configure script where it saves a configuration of all the available libraries on Windows that pyinstaller can make use of. We run that as such:</p>

<pre><code>C:\Users\Chris Oliver\Desktop\pyinstaller-1.4&gt; python Configure.py
</code></pre>

<p>This command assumes that you have the python directory added to your system path. If you don’t have it, you will need to either manually specify the python.exe location or to add it to your system path manually. This isn’t in the scope of this post, but a quick google for it should clear up the issue for you easily.</p>

<p><strong>Step Two</strong> – Making the specification</p>

<p>Now that we have pyinstaller configured, we can jump right into building the executable. Just as we did before, we run Makespec.py against the main python script, which in our case happens to be keryx.py. This generates a build configuration with all the options needed, so we specify them in the call. We will only be using the –onefile option which builds a single file executable since that is all we are interested in at the moment. Run the command similar to this:</p>

<pre><code>C:\Users\Chris Oliver\Desktop\pyinstaller-1.4&gt; python Makespec.py --onefile "C:\Users\Chris Oliver\Desktop\keryx\keryx.py"
wrote C:\Users\Chris Oliver\Desktop\pyinstaller-1.4\keryx\keryx.spec
now run Build.py to build the executable
</code></pre>

<p><strong>Step Three</strong> – Building the executable</p>

<p>Now we’ve got the spec, we’ve got the green light to build, and we’ve still got another half cup of coffee sitting here. What do we do now? Just what it tells us, run Build.py against the spec file and everything is ready to go.</p>

<pre><code>C:\Users\Chris Oliver\Desktop\pyinstaller-1.4&gt; python Build.py keryx\keryx.spec
</code></pre>

<p>Once it’s done compiling, open up your pyinstaller-1.4/keryx/dist folder to be in awe of your newly compiled single file executable! You will still want to test this against multiple versions of Windows and especially ones without Python and wxPython installed (or your respective libraries you are using) and make sure that everything runs smoothly. So that is the basics, get out there and start building awesome cross platform python applications!</p>

            </div><!--/.article-content-->
          </article>
          
        

        <div class="blog-navigation">

          <!--<span class="page_number ">Page: 68 of 79</span>-->

          <div class="pull-left">
            
              <a href="/blog/page-69" class="btn btn-gorails btn-gorails-red next">← Older Posts</a>
            
          </div>

          <div class="pull-right">
            
              
                <a href="/blog/page-67" class="btn btn-gorails btn-gorails-red previous">Newer Posts →</a>
              
            
          </div>
        </div>

      </div>
    </div>
  </div>
</section>


    <!--
<div id="footer-nav">
  <ul>
    <li><a class="home" href="http://excid3.com/blog">home</a></li>
    <li><a class="rss" href="http://feeds.feedburner.com/excid3">rss feed</a></li>
    <li><a class="archives" href="http://excid3.com/blog/archives/">archives</a></li>
    <li><a class="email" href="mailto:chris@excid3.com?subject=hello!">say hello</a></li>
    <li><a class="twitter" href="http://twitter.com/excid3">twitter</a></li>
    <li><a class="github" href="http://github.com/excid3">github</a></li>
  </ul>
</div>
-->


<footer class="clearfix">
  <div class="container">
    <p class="pull-left">Do things that scare you.</p>
    <p class="pull-right">Learn about <a href="http://gorails.com/st-louis-ruby-on-rails">St. Louis Ruby on Rails</a></p>
  </div>
</footer>


    <!-- Google Analytics -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8399719-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
