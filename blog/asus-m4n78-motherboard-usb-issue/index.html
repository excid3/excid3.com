<!DOCTYPE html>
<html>
  <head>
    <title>Asus M4N78 Motherboard USB Issue</title>
    <meta name="author" content="Chris Oliver">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
    <meta name="google-site-verification" content="k8E8tt4Xn45P84zs5M6Z-4cMIGwdbGMJSDSkL6VzvMk" />

    <!--<link rel="shortcut icon" href="favicon.png">-->
    <link href='/assets/global-09e65ed72b4f08933d57dbbe6ee22514.css' rel='stylesheet' type='text/css' />


    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet" />

    <script type="text/javascript" src="/js/prism.js"></script>

    <script type="text/javascript" data-cfasync="false">
      (function() {
        var config = {
          kitId: 'voa6eso',
          scriptTimeout: 3000
        };
        var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
      })();
    </script>

    <link href="https://plus.google.com/106699287110566383664/" rel="author" />
  </head>
  <body>
    <div class="fluid-container header">
  <div class="container">
    <nav class="pull-right">
      <!--<a href="http://gorails.com" class="btn btn-gorails btn-gorails-green">Learn Ruby On Rails</a>-->
      <!--<a href="/prototype">Prototype</a>
      <a href="/improve">Improve</a>
      <a>|</a>-->
      <a href="http://gorails.com">Learn Ruby on Rails</a>
      <a>|</a>
      <a href="/blog">Blog</a>
      <a href="/contact" class="btn btn-gorails btn-gorails-red">Hire Me</a>
    </nav>
    <h1 class="name"><a href="/">Chris Oliver</a></h1>
  </div>
</div>


    <section id="blog">
      <div class="container">
        <div class="row">
          <div class="span8 offset2">
            <div class="article-head">
              <h2 class="title"><a href="/blog/asus-m4n78-motherboard-usb-issue" class="js-pjax">Asus M4N78 Motherboard USB Issue</a></h2>
              <p class="date">Jul 17, 2009</p>
            </div><!--/.article-head-->

            <div class="article-content">
              <p>About 2 months ago I purchased parts for building my own desktop. The goal was to build a powerful desktop workstation for $500 while keeping in mind that this box will become a server in the next couple of years. Dedicated graphics was an unnecessary expense for such a machine. All I need is to power dual monitors smoothly so decent onboard graphics card saved me money there. Turns out this was not a great idea in the long run.</p>

<p>I purchased the <a href="http://www.newegg.com/Product/Product.aspx?Item=N82E16813131382">Asus M4N78</a> motherboard with an onboard Nvidia 8300 from newegg. Everything seemed great. Installed Windows, everything is fine. Installed Ubuntu, everything was fine…for a while. After some time, I noticed that my USB mouse would lock up after random periods of time, often when something mildly video intensive was running, VLC for example. The mouse would stop working and lose power, all other USB devices kept working however unplugging them and replugging them in also stopped receiving power.</p>

<p>After some searching I came across <a href="http://ubuntuforums.org/showthread.php?t=1147699">this thread</a>t on the Ubuntu Forums. A <a href="https://bugs.launchpad.net/ubuntu/%20bug/350065">bug</a> had been filed to Ubuntu back in Jaunty Beta discussing the issue as well. No one seemed to have any idea. It seemed graphics related and yet, it wasn’t the graphics driver. It took a good several weeks before anyone found an answer. I’d like to give a BIG thanks to <a href="http://ubuntuforums.org/member.php?u=786669">Chemical Imbalance</a> for coming across <a href="http://www.nvnews.net/vbulletin/showthread.php?t=123583&amp;page=3">this thread</a> that had the answer we were looking for this entire time.</p>

<p>Basically the issue is with the <a href="http://en.wikipedia.org/wiki/Interrupt">interrupts </a>on the motherboard. This affects the M3N78 PRO and M4N78 PRO motherboards as well as probably others. Simply put, one of the USB ports is sharing an interrupt with the onboard graphics card. It is not strictly an Debian or Ubuntu issue (the two OS’s that have problems with it the most) as in Windows XP, I have experienced a blue screen of death caused by the USBHUB.SYS module. This was one of the first tip offs to me that the issue was hardware related and not OS specific. It has only happend the once in Windows, but the fact that it did happen is very meaningful in finding the cause of the issue.</p>

<p>The fix? Just move the mouse to another USB port. You can check which interrupt your nvidia card is using with <code>cat /proc/interrupts</code> in Linux. Take note of the usb hub that is sharing the interface and compare it with the device that is running on the same one that you find in <code>lsusb</code>. For me the top leftmost port was the one causing the problems.</p>

<p>Hope that helps someone! It took so much time to debug and figure out the cause that I don’t want anyone to have to go through that again. Another fix is to just install a dedicated graphics card. That may be an option for the future, but when you’re on a budget, you’ve got to make things count whenever you can.</p>


              <p><strong>P.S.</strong> <a href="https://twitter.com/excid3/">You might enjoy following me on Twitter.</a></p>
            </div><!--/.article-content-->

            <nav class="share">
              <a href="https://twitter.com/share" class="twitter-share-button" data-via="excid3" data-related="excid3">Tweet</a>
              <div class="g-plusone" data-size="medium"></div>
              <script src="//platform.linkedin.com/in.js" type="text/javascript">lang: en_US</script><script type="IN/Share" data-counter="right"></script>
            </nav>

            <div class="blog-navigation">
              <div class="pull-left">
                
                <a href="/blog/random-mac-address-on-start-up-with-ubuntu" title="Random Mac Address on Start Up with Ubuntu" class="btn btn-gorails btn-gorails-red">&laquo; Random Mac Address on Start Up with Ubuntu</a>
                
              </div>

              <div class="pull-right">
                
                <a href="/blog/psp-modding-tutorial" title="PSP Modding Tutorial" class="btn btn-gorails btn-gorails-red">PSP Modding Tutorial &raquo; </a>
                
              </div>
            </div>

            <div id="disqus_thread"></div>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

            <div class="light-well about">
              <a href="http://excid3.com">
                <div class="pull-left">
                  <img src="http://www.gravatar.com/avatar/ce795239ba5dd2384fc2f88ffaff5451.png" alt="Chris Oliver" />
                </div>
                <p>Chris Oliver specializes in web development and user experience design with Ruby on Rails, Javascript, HTML5, and CSS3 in St. Louis, MO</p>
              </a>
            </div>

          </div>
        </div>
      </div>
    </section>

    <!--
<div id="footer-nav">
  <ul>
    <li><a class="home" href="http://excid3.com/blog">home</a></li>
    <li><a class="rss" href="http://feeds.feedburner.com/excid3">rss feed</a></li>
    <li><a class="archives" href="http://excid3.com/blog/archives/">archives</a></li>
    <li><a class="email" href="mailto:chris@excid3.com?subject=hello!">say hello</a></li>
    <li><a class="twitter" href="http://twitter.com/excid3">twitter</a></li>
    <li><a class="github" href="http://github.com/excid3">github</a></li>
  </ul>
</div>
-->


<footer class="clearfix">
  <div class="container">
    <p class="pull-left">Do things that scare you.</p>
    <p class="pull-right">Learn about <a href="http://gorails.com/st-louis-ruby-on-rails">St. Louis Ruby on Rails</a></p>
  </div>
</footer>


    <!-- SubHub.io -->
    <script>
      (function(s,u,b,hh,uu,bb){
        uu=document.createElement(u);
        uu.setAttribute('data-subhub',hh);
        uu.setAttribute('data-panel',true);
        uu.async=1;uu.src=b;
        bb=s.getElementsByTagName(u)[0];
        bb.parentNode.insertBefore(uu,bb);
      })(document, 'script',
        'https://assets.subhub.io/v1/subhub.js',
        'a48820f5-a170-4e4c-97cf-ced8d190679e');
    </script>

    <!-- Google Analytics -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8399719-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>

    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'excid3'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>

    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

    <script type="text/javascript">
      (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
  </body>
</html>

