<!DOCTYPE html>
<html>
  <head>
    <title>Blog | Chris Oliver | St. Louis Ruby on Rails Web Developer</title>

    
    <meta name="author" content="Chris Oliver">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="k8E8tt4Xn45P84zs5M6Z-4cMIGwdbGMJSDSkL6VzvMk" />

    <link rel="alternate" type="application/rss+xml" title="Chris Oliver / excid3.com Feed" href="http://excid3.com/feed.xml"/>

    <!--<link rel="shortcut icon" href="favicon.png">-->
    <link href='/assets/global-c224c07eca6e857790f0324871c8800e.css' rel='stylesheet' type='text/css' />


    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet" />

    <script type="text/javascript" data-cfasync="false">
      (function() {
        var config = {
          kitId: 'voa6eso',
          scriptTimeout: 3000
        };
        var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
      })();
    </script>

    <link href="https://plus.google.com/106699287110566383664/" rel="author" />
  </head>
  <body>
    <div class="fluid-container header">
  <div class="container">
    <nav class="pull-right">
      <!--<a href="http://gorails.com" class="btn btn-gorails btn-gorails-green">Learn Ruby On Rails</a>-->
      <!--<a href="/prototype">Prototype</a>
      <a href="/improve">Improve</a>
      <a>|</a>-->
      <a href="http://gorails.com">Learn Ruby on Rails</a>
      <a>|</a>
      <a href="/blog">Blog</a>
      <a href="/contact" class="btn btn-gorails btn-gorails-red">Hire Me</a>
    </nav>
    <h1 class="name"><a href="/">Chris Oliver</a></h1>
  </div>
</div>


    <section id="blog">
  <div class="container">
    <div class="row">
      <div class="span8 offset2">

        <p class="archive">Looking for old posts? Visit the <a href="/blog/archive">archive</a>.</p>

        
          <article class="first">
            <div class="article-head">
              <h2 class="title"><a href="/blog/productivity-hacks" class="js-pjax">Productivity Hacks</a></h2>
              <p class="date">Mar 29, 2011</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>As my last semester of college is starting to wrap up, I’m under a ridiculous amount of pressure trying to get 8 different projects finished at once, homework, job interviews, and a handful of other things. Before I go mentally insane, I’ve figured out some things that work for me in order to stay productive the whole day. So productive, in fact, that I’ve forgotten to eat until 8pm multiple times.</p>

<p>That might sound a little ridiculous but sometimes when the crap hits the fan you’ve got to neglect things in order to do it all. So here are a few of the life hacks I’ve used to accomplish this.</p>

<h3>1. Disable your clock</h3>

<p><img src="http://excid3.com/blog/wp-content/uploads/2011/03/Screen-shot-2011-03-29-at-11.03.04-AM.png" title="Screen shot 2011-03-29 at 11.03.04 AM" alt="" />If you’re anything like me, you are constantly looking at the clock counting down the amount of time until the next class, meeting, or other event. Lucky for me, I have several Android phones that sync with my Google Calendar (I know you’re jealous <img src="http://excid3.com/blog/wp-includes/images/smilies/icon_razz.gif" alt=":P" /> ). This lets me add things into my gcal, sync to my phone, and get alerts on my computer and phone when events are coming up in an hour. It’s single handedly the <strong>MOST</strong> productive hack I have used to date.</p>

<h3>2. Keep your OS clean</h3>

<p>The first step is to choose your OS of poison. I do a lot of Ruby on Rails, so I use OSX. This may be Linux for you or Windows for someone else. The key is, pick your OS for work and stick with it. Install the tools you need: vim, Ruby, Rails, whatever. The trick here is to make sure you don’t install things that you don’t need. It’s too easy to leave Pidgin open all day and have people continuously pinging you throughout the day. Same goes with websites and other apps. If you have too many points of contact, you won’t be able to get in the zone. That also means checking your email and RSS feeds once in the morning, once at lunch, and once at the end of the workday. The less the better, especially if you’re expecting an important email to roll in. It’s an email, it obviously doesn’t need a response the exact second it arrives because you would have received a phone call if it was <strong>THAT</strong> important. Keep in mind that notifications are just another distraction and the people who achieve the most tend to be those who can focus and naturally avoid these things.</p>

<h3>3. Learn the tools that work best for what you do</h3>

<p>For the longest time, I continued using TextMate and GEdit for writing code. I refuse to use IDEs because I hate their bloat, but I never felt like taking the time to memorize all the commands for Vim. Since I took the plunge, I have been able to traverse so much more code than ever before, and I still don’t know crap about Vim! It’s the right tool for me and what I do. Find yours and become a master.</p>

<h3>4. Find your optimum social environment</h3>

<p>This is very crucial to me. No matter which of the above things I do, it really comes down to where I’m working. For me, I work best with a pair of noise canceling headphones in a relatively quiet place. People walking around, noises, really anything can distract me at times. Building a good music playlist and drowning out the audio distractions allows me to also drown out the background visual ones as well.</p>

<h3>5. Accomplish a small, but good feeling task every morning</h3>

<p>Probably the greatest feeling is waking up, doing something that gives you an incredible amount of motivation and confidence, and then tackling some hard problem right afterwards. It’s good to have a schedule or task list for each day, but that’s often hard to do when you’re unmotivated and groggy in the morning. Grab something to drink and pick a small task that can be completed from start to finish in half an hour. There have been a couple occasions where this has greatly benefitted me. Recently, I received an email with some wonderful news in the morning and for the rest of the day I was so excited and confident I was able to do a much better job at an important project I had later that day. Another time on a Saturday morning, I patched in a feature to a new NodeJS IRC library to add SSL support. This got me excited by contribute to an open source project in a language I barely know so much so that I went back immediately to hacking on a project for school and finished some larger features that felt too daunting to jump into cold.</p>

<h3>Summary</h3>

<p>These are a few things that work exceptionally well. Don’t work too hard though, you’ll get burnt out and these hacks will suffer. They work well for me but I’d love to hear what things you use to keep focused on a daily basis.</p>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="middle">
            <div class="article-head">
              <h2 class="title"><a href="/blog/installing-postgresql-and-pg-gem-on-mac-osx" class="js-pjax">Installing PostgreSQL and pg gem on Mac OSX</a></h2>
              <p class="date">Mar 12, 2011</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>Today I was fixing a bug in Rails 3.0.5 (hopefully it gets merged!) and I needed to build some test cases along with my patch. First of all, my original patch was making two db queries when it shouldn’t have been, so it was important that I had test cases to show the bug existed, as well as make sure it was doing the proper amount of querying. Secondly, the <code>empty?</code> function weren’t any test cases anyways, so it was nice that I was able to provide some basic test coverage for that as well. That’s probably why the issue slipped through several releases (appears to have been around since 3.0.0beta).</p>

<p>As this was my first contribution to Rails core, I needed to figure out how everything worked. The <a href="http://edgeguides.rubyonrails.org/contributing_to_rails.html">Contributing To Rails Guide</a> is a great start and I was able to quickly fork Rails thanks to Github, clone it, make my patch, and then start running test cases. As soon as I tried to install the dependencies, I got an error trying to install the PostgreSQL gem, pg.</p>

<pre><code>No pg_config... trying anyway. If building fails, please try again with  --with-pg-config=/path/to/pg_config
</code></pre>

<p>Oh, yeah, I don’t have PostgreSQL installed yet. <img src="http://excid3.com/blog/wp-includes/images/smilies/icon_smile.gif" alt=":-)" /> I installed PostgreSQL from the <a href="http://www.enterprisedb.com/products-services-training/pgdownload#osx">one click installer at EnterpriseDB</a>.</p>

<p>Next attempt at <code>bundle install</code> (I am using <a href="http://gembundler.com/">Bundler</a> instead of rubygems to install) gave me this:</p>

<pre><code>Building native extensions.  This could take a while...
ERROR:  Error installing pg:
ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb install pg
extconf.rb:1: command not found: pg_config --version
ERROR: can't find pg_config.
HINT: Make sure pg_config is in your PATH
</code></pre>

<p>The one click installer does not append the PostgreSQL bin directory to your path. You have two options, edit your bashrc and append the path permanently in there, or simply run <code>gem</code> or <code>bundle</code> with the PATH appended just before it like so:</p>

<pre><code>PATH=$PATH:/Library/PostgreSQL/9.0/bin/ bundle install
or
PATH=$PATH:/Library/PostgreSQL/9.0/bin/ gem install pg
</code></pre>

<p>That should do the trick. <code>pg</code> installed just fine after this and I was able to finish up my test cases and submit my patch! <img src="http://excid3.com/blog/wp-includes/images/smilies/icon_biggrin.gif" alt=":D" /></p>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="last">
            <div class="article-head">
              <h2 class="title"><a href="/blog/undefined-method-zero-for" class="js-pjax">undefined method &#8216;zero?&#8217; for #<OrderedHash {}></a></h2>
              <p class="date">Mar 11, 2011</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>As I was upgrading some code to the new ActiveRecord syntax (which is beautiful by the way), I ran into an issue. The query worked perfectly fine before with the<code>find()</code> call returning an array, but as I moved to the new syntax, ActiveRecord returns a Relation instead.</p>

<p>My query was fairly simple, and I just wanted to determine if the results were empty or not. We are using this code in our Senior Project, a simple web application for SIUe’s campus to make campus tour management a whole lot easier. We have several different areas where we need to query for the available tours, or all the tours in a given calendar month, etc. I made the query before where it would return an array. This new syntax ended up returning a Relation to the <code>@tours</code> variable. A call to <code>@tours.empty</code>? actually gave me this error:</p>

<pre><code>undefined method 'zero?' for #
</code></pre>

<p>What was weird, was if I added this line (or anything else that used <code>@tours</code>) the error never crept up again:</p>

<pre><code>puts @tours
</code></pre>

<p>Internally in Rails, when you do a group query, you’re changing the type of the <code>count</code> variable inside the Relation class. Normally it’s a simple Integer that keeps track of how many objects are returned if the results haven’t been loaded yet. Once you make a call to it, the results are loaded, and the <code>empty?</code> no longer relies on the count variable as it can use the length of the results array instead.</p>

<p>Since a group returns an <code>ActiveSupport::OrderedHash</code> as the type for the count variable, this causes a problem. The <code>zero?</code> is implemented for <code>Numeric</code> types, but not an <code>OrderedHash</code> obviously.</p>

<p>The solution to this is to simply patch Rails’ <code>ActiveRecord::Relation</code> like so:  Simply check the type to make sure it is <code>Numeric</code> and continue using <code>zero?</code>, otherwise we should check to see if the count is <code>empty?</code> for the case where count is an <code>OrderedHash</code> or even some other type.</p>

<p>Hopefully my patch gets pulled into Rails 3.0.6 core! I’ve got my fingers crossed. <img src="http://excid3.com/blog/wp-includes/images/smilies/icon_biggrin.gif" alt=":D" /></p>

            </div><!--/.article-content-->
          </article>
          
        

        <div class="blog-navigation">

          <!--<span class="page_number ">Page: 49 of 79</span>-->

          <div class="pull-left">
            
              <a href="/blog/page-50" class="btn btn-gorails btn-gorails-red next">← Older Posts</a>
            
          </div>

          <div class="pull-right">
            
              
                <a href="/blog/page-48" class="btn btn-gorails btn-gorails-red previous">Newer Posts →</a>
              
            
          </div>
        </div>

      </div>
    </div>
  </div>
</section>


    <!--
<div id="footer-nav">
  <ul>
    <li><a class="home" href="http://excid3.com/blog">home</a></li>
    <li><a class="rss" href="http://feeds.feedburner.com/excid3">rss feed</a></li>
    <li><a class="archives" href="http://excid3.com/blog/archives/">archives</a></li>
    <li><a class="email" href="mailto:chris@excid3.com?subject=hello!">say hello</a></li>
    <li><a class="twitter" href="http://twitter.com/excid3">twitter</a></li>
    <li><a class="github" href="http://github.com/excid3">github</a></li>
  </ul>
</div>
-->


<footer class="clearfix">
  <div class="container">
    <p class="pull-left">Do things that scare you.</p>
    <p class="pull-right">Learn about <a href="http://gorails.com/st-louis-ruby-on-rails">St. Louis Ruby on Rails</a></p>
  </div>
</footer>


    <!-- Google Analytics -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8399719-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
