<!DOCTYPE html>
<html>
  <head>
    <title>Blog | Chris Oliver | St. Louis Ruby on Rails Web Developer</title>

    
    <meta name="author" content="Chris Oliver">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="k8E8tt4Xn45P84zs5M6Z-4cMIGwdbGMJSDSkL6VzvMk" />

    <link rel="alternate" type="application/rss+xml" title="Chris Oliver / excid3.com Feed" href="http://excid3.com/feed.xml"/>

    <!--<link rel="shortcut icon" href="favicon.png">-->
    <link href='/assets/global-c224c07eca6e857790f0324871c8800e.css' rel='stylesheet' type='text/css' />


    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet" />

    <script type="text/javascript" data-cfasync="false">
      (function() {
        var config = {
          kitId: 'voa6eso',
          scriptTimeout: 3000
        };
        var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
      })();
    </script>

    <link href="https://plus.google.com/106699287110566383664/" rel="author" />
  </head>
  <body>
    <div class="fluid-container header">
  <div class="container">
    <nav class="pull-right">
      <!--<a href="http://gorails.com" class="btn btn-gorails btn-gorails-green">Learn Ruby On Rails</a>-->
      <!--<a href="/prototype">Prototype</a>
      <a href="/improve">Improve</a>
      <a>|</a>-->
      <a href="http://gorails.com">Learn Ruby on Rails</a>
      <a>|</a>
      <a href="/blog">Blog</a>
      <a href="/contact" class="btn btn-gorails btn-gorails-red">Hire Me</a>
    </nav>
    <h1 class="name"><a href="/">Chris Oliver</a></h1>
  </div>
</div>


    <section id="blog">
  <div class="container">
    <div class="row">
      <div class="span8 offset2">

        <p class="archive">Looking for old posts? Visit the <a href="/blog/archive">archive</a>.</p>

        
          <article class="first">
            <div class="article-head">
              <h2 class="title"><a href="/blog/too-engrained" class="js-pjax">Too Engrained</a></h2>
              <p class="date">Feb 14, 2013</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>Each week, I get together with my friends <a href="http://archetyp.al/">Rob</a> and <a href="http://www.articulateventures.com">Vance</a>. We all share the same fascination with technology and science. What is even more fascinating is how it affects my productivity.</p>

<p>If you’re reading my blog, chances are you are a developer and you probably have a lot of friends who are also developers. And every week there is a new framework introduced to the world.</p>

<p>Every week you’re a step further behind the curve. Another step away from being “cool” and impressing those friends of yours. In order to impress them, you must always be fiddling with new technologies whether you’re really accomplishing anything or not.</p>

<p>This works for anything. If most of your friends are into cars, then you need to be learning how to crank out more horsepower than your friends’ cars. If your friends play video games, then you need to spend your time learning obscure facts about video games.</p>

<p>This is where things get interesting though. Rob and Vance come from different backgrounds. Rob is interested in bioinformatics and robotics. Vance is a communications guy and has worked at the World Bank.</p>

<p>The tides changed when I started hanging out with these guys each week. Being “cool and productive” no longer meant speeding up my blog to respond 100ms faster than my friends’. It meant that I need to be solving real problems with software.</p>

<p>When we get together, we talk about things at a higher level. We want to make an impact on people’s lives. That is incredibly hard to do if the only thing you ever think about is the implementation details of a project. Of course those are important, but they can also always be changed.</p>

<p><img src="http://cdn.dropmark.com/19112/e60393b4b337aa95f9a140a13bf4c0a7d3da3a1d/tumblr_lwvnj32unB1r95ui7o1_500.jpg" alt="tumblr_lwvnj32unB1r95ui7o1_500.jpg" /></p>

<p>I can’t half-finish a project and impress Rob and Vance. I can’t half-fix a customer’s website and expect them to be happy with it. It’s exactly the same thing as half-curing cancer. People might be intrigued for a few minutes, but that’s it.</p>

<p>You should deliberately step outside your bubble to improve yourself. I’m not saying you should ditch your friends in your career field, but you should certainly value ones from different backgrounds. Friends can be the people who catapult you ahead in life or hold you back and it’s your decision who those people are.</p>

<p>So today, I want you to dig through your list of projects and find the ones you never finished. Each and every one of those started with the idea of an awesome solution to a problem. The reason you never finished them was because you got too caught up in the details.</p>

<p>What problem were you solving? “Oh yeah, I was going to build this awesome solution to solve ________!” Now write that down. Don’t forget it. And finish that project.</p>

            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="middle">
            <div class="article-head">
              <h2 class="title"><a href="/blog/gorails-episode-1-setting-up-a-minimal-ubuntu-rails-development-environment" class="js-pjax">Setting Up A Minimal Ubuntu Rails Development Environment</a></h2>
              <p class="date">Feb 12, 2013</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>A while back I covered <a href="http://excid3.com/blog/setting-up-ubuntu-12-04-with-ruby-1-9-3-nginx-passenger-and-postgresql-or-mysql/">Setting Up Ubuntu 12.04 with Ruby 1.9.3, Rails, Nginx, Passenger, and PostgreSQL or MySQL</a> and it’s gotten quite a lot of traffic. This video doesn’t cover the exact same setup process as the blog since the blog post is geared a little more towards a production server. Setting up a dev environment for the first time can take a lot of trial and error so I’ve kept this video to the minimum required steps to get your first Rails application setup.</p>

<p>I thought it would be nice to start a screencast series called GoRails (full site coming soon) to cover Rails a lot more in depth, but keeping the videos fairly short. So if you’re interested in GoRails, join my email newsletter on the sidebar at the top!</p>

<iframe src="//player.vimeo.com/video/59366882?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff" width="770" height="433" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>


            </div><!--/.article-content-->
          </article>
          <div class="separater"></div>
        
          <article class="last">
            <div class="article-head">
              <h2 class="title"><a href="/blog/logrotate-rails-production-logs" class="js-pjax">Logrotate Rails Production Logs</a></h2>
              <p class="date">Feb 08, 2013</p>
            </div><!--/.article-head-->
            <div class="article-content">
              <p>You might be just like me and really enjoy building software and web applications but strongly dislike the server maintenance that comes with it. One of those things you have to pay attention to is the size of the log files that your Rails application produces. I’ll be showing you how to logrotate Rails production logs each day to archive a copy of your logs and then compress them to save space and make them much more manageable.</p>

<p>Your log files can grow fast, especially if you have a lot of traffic. For example, after about 1 month, my log files are 300MB in size. Forget about that for a while and you could run out of disk space on your server and that would be bad.</p>

<h2>Configuring Logrotate Rails 3 Production Logs</h2>

<p>You might be surprised at just how easy to setup logrotate Rails logs is. The reason it is so handy is that a bunch of your operating system software is already using it. We just have to plug in our configuration and we’re set!</p>

<p>The first step is to open up <code>/etc/logrotate.conf</code> using <code>vim</code> or <code>nano</code>. Jump to the bottom of the file an add the following block of code. You’ll want to change the first line to match the location where your Rails app is deployed. Mine is under the <code>deploy</code> user’s home directory. Make sure to point to the log directory with the <code>*.log</code> bit on the end so that we rotate all the log files.</p>

<pre><code>/home/deploy/APPNAME/current/log/*.log {
  daily
  missingok
  rotate 7
  compress
  delaycompress
  notifempty
  copytruncate
}
</code></pre>

<h2>How It Works</h2>

<p>This is fantastically easy. Each bit of the configuration does the following:</p>

<ul>
<li><strong>daily</strong> – Rotate the log files each day. You can also use weekly or monthly here instead.</li>
<li><strong>missingok</strong> – If the log file doesn’t exist, ignore it</li>
<li><strong>rotate 7</strong> – Only keep 7 days of logs around</li>
<li><strong>compress</strong> – GZip the log file on rotation</li>
<li><strong>delaycompress</strong> – Rotate the file one day, then compress it the next day so we can be sure that it won’t interfere with the Rails server</li>
<li><strong>notifempty</strong> – Don’t rotate the file if the logs are empty</li>
<li><strong>copytruncate</strong> – Copy the log file and then empties it. This makes sure that the log file Rails is writing to always exists so you won’t get problems because the file does not actually change. If you don’t use this, you would need to restart your Rails application each time.</li>
</ul>


<h2>Running Logrotate</h2>

<p>Since we just wrote this configuration, you’ll want to test it.</p>

<p>To run logrotate manually, we just do: <code>sudo /usr/sbin/logrotate -f /etc/logrotate.conf</code></p>

<p>You’re going to want to run it a second time to make sure the <code>delaycompress</code> option is working and to actually compress the log. Here’s an example of what you’ll see if you <code>ls</code> the log folder after running <code>logrotate</code> twice:</p>

<p><img src="http://cl.ly/image/1h3F1H3e2V1a/Screen%20Shot%202013-02-08%20at%2010.10.49%20AM.png" alt="Logrotate Rails 3 Production Log" /></p>

<p>You can see that the <code>production.log</code> still exists, <code>production.log.1</code> is a copy of the logs between the first and second run of logrotate, and <code>production.log.2.gz</code> is the 300MB behemoth of a log file that we had before compressed nicely with Gzip. Once we get up to 7 log files, the next time logrotate runs, it will delete the oldest one so that we only have 7 days worth of logs. If you want to keep all the logs around, you can remove the <code>rotate</code> line from the configuration.</p>

<p>Plus, since we just edited the main <code>logrotate.conf</code> file, the cron job will automatically execute the logrotate Rails logs daily!</p>

<h2>Setting Up LogRotate Rails Logs Isn’t So Bad After All!</h2>

<p>Congratulations, you’re set! I’ve had a few cases where the filesystem filled up on a server before and believe me, that is no fun. <a href="http://stackoverflow.com/questions/4883891/ruby-on-rails-production-log-rotation" title="Ruby on Rails production log rotation">This stackoverflow post</a> also has a nice configuration for a weekly rotate that keeps a year’s worth of logs that you might find helpful.</p>

            </div><!--/.article-content-->
          </article>
          
        

        <div class="blog-navigation">

          <!--<span class="page_number ">Page: 5 of 79</span>-->

          <div class="pull-left">
            
              <a href="/blog/page-6" class="btn btn-gorails btn-gorails-red next">← Older Posts</a>
            
          </div>

          <div class="pull-right">
            
              
                <a href="/blog/page-4" class="btn btn-gorails btn-gorails-red previous">Newer Posts →</a>
              
            
          </div>
        </div>

      </div>
    </div>
  </div>
</section>


    <!--
<div id="footer-nav">
  <ul>
    <li><a class="home" href="http://excid3.com/blog">home</a></li>
    <li><a class="rss" href="http://feeds.feedburner.com/excid3">rss feed</a></li>
    <li><a class="archives" href="http://excid3.com/blog/archives/">archives</a></li>
    <li><a class="email" href="mailto:chris@excid3.com?subject=hello!">say hello</a></li>
    <li><a class="twitter" href="http://twitter.com/excid3">twitter</a></li>
    <li><a class="github" href="http://github.com/excid3">github</a></li>
  </ul>
</div>
-->


<footer class="clearfix">
  <div class="container">
    <p class="pull-left">Do things that scare you.</p>
    <p class="pull-right">Learn about <a href="http://gorails.com/st-louis-ruby-on-rails">St. Louis Ruby on Rails</a></p>
  </div>
</footer>


    <!-- Google Analytics -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8399719-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
